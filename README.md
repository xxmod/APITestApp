# API 测试工具 - 现代版 v2.0

这是一个基于 .NET 8.0 和 WinForms 的现代化 API 测试工具，经过重大升级，具有更直观的界面和更强大的功能。

## 🎨 界面特色

- **现代化设计**：采用 Segoe UI 字体和现代色彩搭配
- **分栏布局**：左侧配置请求，右侧显示响应
- **上下分割响应区**：响应内容和 Cookie 变化分别显示
- **智能键值对管理**：路径、参数、请求头、Cookie 均可逐项添加/删除
- **图标化界面**：使用 Emoji 图标增强视觉效果

## 🚀 新版本亮点

### ✨ **全新功能**

1. **📁 路径专用管理**：
   - 路径不再需要键，只需要输入路径段
   - 支持多段路径自动拼接（如：`api` + `users` + `123` = `/api/users/123`）
   - 动态添加/删除路径段

2. **📊 分离式响应显示**：
   - **上半部分**：完整的响应内容（状态码、响应头、响应体）
   - **下半部分**：专门的 Cookie 变化追踪
   - 再也不会因为 Cookie 更新而看不到响应内容

3. **🔧 智能布局**：
   - 使用 FlowLayoutPanel 避免控件重叠
   - 自动滚动支持
   - 响应式布局设计

### 🛠 **改进的功能**

#### 路径配置 📁
- **之前**：需要输入完整路径如 `/api/users/123`
- **现在**：分段输入：`api`, `users`, `123`，自动拼接

#### 参数管理 🔧
- **键值对形式**：`type=1`, `number=2`, `key=3`
- **自动URL编码**：特殊字符自动处理
- **动态增删**：点击 `+ 添加` 新增，点击 `×` 删除

#### 请求头管理 📋
- **常用预设**：User-Agent, Accept 等
- **自定义支持**：Authorization, Content-Type 等
- **实时管理**：随时添加/删除请求头

#### Cookie 管理 🍪
- **双重显示**：配置区域 + 专用变化窗口
- **变化追踪**：🆕新增、🔄修改、🗑️删除
- **会话保持**：自动同步服务器返回的 Cookie

## 📱 使用方法

### 1. 启动应用程序
```bash
cd APITestApp
dotnet run
```

### 2. 配置请求

#### 基础配置
- **API URL**: 在顶部输入目标服务器地址（如：`http://localhost:3001`）
- **HTTP 方法**: 从下拉菜单选择请求方法

#### 路径配置 📁
- 点击 **"+ 添加路径"** 按钮
- 输入路径段（如：`api`, `users`, `123`）
- 系统自动拼接为：`/api/users/123`

#### 查询参数 🔧
- 点击 **"+ 添加"** 按钮
- 输入键值对（如：`type` = `1`）
- 自动构建查询字符串：`?type=1&number=2`

#### 请求头 📋
- 点击 **"+ 添加"** 按钮
- 输入请求头（如：`Authorization` = `Bearer token123`）

#### Cookie 🍪
- 点击 **"+ 添加"** 按钮
- 输入 Cookie（如：`session` = `abc123`）

### 3. 发送请求
点击底部的 **🚀 发送请求** 按钮

### 4. 查看结果
- **上半部分**：完整的HTTP响应信息
- **下半部分**：专门的 Cookie 变化追踪

## 🧪 测试示例

### 启动测试服务器
```bash
node test-server.js
```
测试服务器将运行在 `http://localhost:3001`

### 示例请求配置

#### 完整示例：用户信息查询
- **URL**: `http://localhost:3001`
- **路径**: 
  - 第1段：`api`
  - 第2段：`users`
  - 第3段：`123`
- **参数**: 
  - `include` = `profile`
  - `format` = `json`
- **方法**: GET
- **请求头**:
  - `Authorization` = `Bearer your-jwt-token`
  - `Accept` = `application/json`
- **Cookie**:
  - `session` = `user_session_123`
  - `theme` = `dark`

**最终请求**：`http://localhost:3001/api/users/123?include=profile&format=json`

## 🎯 界面对比

### 问题解决

#### ✅ 问题1：添加按钮被遮挡
- **之前**：添加两个值后按钮就看不见了
- **现在**：使用 FlowLayoutPanel，按钮始终在底部可见

#### ✅ 问题2：路径不需要键
- **之前**：路径也要输入键值对，很不直观
- **现在**：专门的路径控件，只需输入路径段

#### ✅ 问题3：Cookie 变化覆盖响应内容
- **之前**：Cookie 更新时看不到请求内容
- **现在**：上下分割窗口，响应内容和 Cookie 变化分别显示

## 🛠 技术实现

### 新增组件
- **`PathControl`**: 专用路径输入控件
- **`PathPanel`**: 路径管理面板
- **上下分割容器**: `SplitContainer` 分离响应显示

### 布局优化
- **FlowLayoutPanel**: 避免控件重叠
- **自动滚动**: 支持大量条目
- **响应式设计**: 适应不同窗口大小

## 📁 项目结构

- `Program.cs`: 完整的应用程序代码（包含所有组件）
- `APITestApp.csproj`: 项目配置文件
- `test-server.js`: 测试用的 Node.js API 服务器
- `README.md`: 详细使用说明

## 🛠 技术栈

- **.NET 8.0**: 现代化的 .NET 平台
- **Windows Forms**: 原生 Windows GUI 框架
- **HttpClient**: HTTP 请求处理
- **CookieContainer**: Cookie 会话管理
- **Newtonsoft.Json**: JSON 处理
- **Node.js**: 测试服务器

## ⚡ 性能特点

- 异步 HTTP 请求，界面不会阻塞
- 智能内存管理，支持大量键值对
- 快速的 JSON 格式化
- 高效的 Cookie 状态跟踪
- 流畅的 UI 交互体验

## 🔧 系统要求

- Windows 操作系统
- .NET 8.0 SDK
- Node.js（用于测试服务器，可选）

## 📝 更新日志

### v2.0 (当前版本)
- ✨ 新增专用路径管理功能
- ✨ 响应区域上下分割显示
- 🐛 修复添加按钮被遮挡问题
- 🐛 修复 Cookie 变化覆盖响应内容问题
- 🎨 优化 UI 布局和交互体验

### v1.0
- 🎉 首个版本发布
- 基础 API 测试功能
- 键值对管理
- Cookie 变化追踪

开始使用这个全新升级的 API 测试工具，体验更流畅、更直观的开发调试过程！🎉
